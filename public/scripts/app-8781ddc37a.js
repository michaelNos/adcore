/******/!function(e){function t(o){if(n[o])return n[o].exports;var r=n[o]={exports:{},id:o,loaded:!1};return e[o].call(r.exports,r,r.exports,t),r.loaded=!0,r.exports}// webpackBootstrap
/******/
var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){"use strict";var o=n(1),r=n(2),a=n(3),i=n(4),l=n(5),c=n(6),s=n(7),u=n(8);angular.module("adcore",["ngAnimate","ngCookies","ngTouch","ngSanitize","ngMessages","ngAria","ui.router","ui.bootstrap","ui.grid","ui.grid.pagination","ui.grid.selection","currencyFormat"]).constant("moment",moment).config(o.config).config(r.routerConfig).run(a.runBlock).service("CRUD",c.CRUD).service("FormatRow",s.FormatRow).controller("MainController",i.MainController).controller("TableController",l.TableController).controller("ModalInstanceController",l.ModalInstanceController).directive("acmeNavbar",u.NavbarDirective)},function(e,t){"use strict";function n(e){"ngInject";e.debugEnabled(!0)}n.$inject=["$logProvider"],Object.defineProperty(t,"__esModule",{value:!0}),t.config=n},function(e,t){"use strict";function n(e,t,n){"ngInject";e.state("home",{url:"/",templateUrl:"app/table/table.html",controller:"TableController",controllerAs:"table"}),t.otherwise("/"),n.html5Mode(!0)}n.$inject=["$stateProvider","$urlRouterProvider","$locationProvider"],Object.defineProperty(t,"__esModule",{value:!0}),t.routerConfig=n},function(e,t){"use strict";function n(e){"ngInject";e.debug("runBlock end")}n.$inject=["$log"],Object.defineProperty(t,"__esModule",{value:!0}),t.runBlock=n},function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});t.MainController=function o(){"ngInject";n(this,o)}},function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});t.TableController=["$scope","CRUD","FormatRow","$uibModal","$state",function o(e,t,r,a,i){"ngInject";n(this,o),e.data=[],e.selectedRow,e.modalData={};var l=t.readData("https://adcore-test.herokuapp.com/api/read");e.gridOptions={totalItems:e.data.length,paginationPageSize:10,paginationCurrentPage:1,enablePaginationControls:!1,enableHorizontalScrollbar:0,enableVerticalScrollbar:0,rowTemplate:'<div ng-repeat="col in colContainer.renderedColumns track by col.colDef.name" tooltip-placement="{{bottom}}" tooltip-append-to-body="true" uib-tooltip="On the {{row.entity.CourseDescription}}" class="ui-grid-cell" ui-grid-cell></div>',columnDefs:[{field:".",enableColumnMenu:!1,displayName:"",width:22,cellTemplate:'<div class="ui-grid-cell-contents" ng-click="grid.updateRow(row, col)"><span class="glyphicon glyphicon-check"></span></div>'},{field:".",enableColumnMenu:!1,displayName:"",width:22,cellTemplate:'<div class="ui-grid-cell-contents" ng-click="grid.deleteRow(row, col)"><span class="glyphicon glyphicon-remove"></span></div>'},{field:"CourseName",width:200},{field:"Location",width:570},{field:"Start"},{field:"Length"},{field:"Price"}],onRegisterApi:function(n){e.gridApi=n,e.gridApi.grid.registerRowsProcessor(e.singleFilter,200),e.gridApi.grid.getTooltip=function(t){e.selectedRow=t},e.gridApi.grid.deleteRow=function(n){t.createData("https://adcore-test.herokuapp.com/api/delete",{_id:n.entity._id}).then(function(){e.gridOptions.data=e.gridOptions.data.filter(function(e){return e._id!=n.entity._id})})},e.gridApi.grid.updateRow=function(t){e.modalData.updatedData=e.modalData.allData.filter(function(e){return e._id===t.entity._id}),e.open()}}},l.then(function(t){e.modalData.allData=t;var n=[],o=0;t.reverse().forEach(function(e){var t={};t._id=e._id,t.CourseName=e.CourseName,t.CourseDescription=e.CourseDescription,t.Location=r.getLocation([e.Country,e.City,e.University]),t.Start=r.getDate(e.StartDate),t.Length=r.getLength(e.StartDate,e.EndDate),t.Price=r.getPrice(e.Price,e.Currency),n.push(t),o++}),e.data=n,e.gridOptions.data=n}),e.filter=function(){e.gridApi.grid.refresh()},e.createRow=function(){e.modalData.updatedData=void 0,e.open()},e.singleFilter=function(t){var n=new RegExp(e.filterValue);return t.forEach(function(e){var t=!1;["CourseName","Location","Start","Length","Price"].forEach(function(o){void 0!=e.entity[o]&&e.entity[o].toString().toLowerCase().match(n)&&(t=!0)}),t||(e.visible=!1)}),t},e.open=function(){var t=a.open({animation:!0,ariaLabelledBy:"modal-title",ariaDescribedBy:"modal-body",templateUrl:"myModalContent.html",backdrop:"static",keyboard:!1,controller:"ModalInstanceController",size:"lg",resolve:{formData:function(){return e.modalData}}});t.result.then(function(){i.reload()})}}],t.ModalInstanceController=["$uibModalInstance","formData","$scope","CRUD","moment","$timeout",function r(e,t,o,a,i,l){"ngInject";n(this,r);var c=t.updatedData,s=t.allData;o.butDisable=!1,o.inputsDisable=!1,o.course={},o.modalTitle="New Course",o.countries=[],o.selectedCountry=void 0;var u=[];o.cities=[];var d=[];o.universities=[];var p=[];o.currencies=[];var f=[];void 0!=c&&l(function(){c.length>0&&(o.modalTitle="Update Course",o.butDisable=!0,o.inputsDisable=!0,o.course=t.updatedData[0],o.course.Price=parseInt(t.updatedData[0].Price),o.course.StartDate=i(t.updatedData[0].StartDate).toDate(),o.course.EndDate=i(t.updatedData[0].EndDate).toDate())},100);for(var m=0;m<s.length;m++)u.push(s[m].Country),f.push(s[m].Currency);o.countries=u.filter(function(e,t,n){return n.indexOf(e)===t}),o.currencies=f.filter(function(e,t,n){return n.indexOf(e)===t}),o.$watch("course.Country",function(e){d=[];for(var t=0;t<s.length;t++)s[t].Country==e&&d.push(s[t].City);void 0==c&&(o.course.City="",o.course.University=""),o.cities=d.filter(function(e,t,n){return n.indexOf(e)===t})}),o.$watch("course.City",function(e){p=[];for(var t=0;t<s.length;t++)s[t].City==e&&p.push(s[t].University);void 0==c&&(o.course.University=""),o.universities=p.filter(function(e,t,n){return n.indexOf(e)===t})}),o.dateOptions={formatYear:"yy",maxDate:new Date(2020,5,22),minDate:new Date,startingDay:1},o.formats=["dd-MMMM-yyyy","yyyy/MM/dd","dd.MM.yyyy","shortDate"],o.format=o.formats[0],o.altInputFormats=["M!/d!/yyyy"],o.openStart=function(){o.openStartPopup.opened=!0},o.openStartPopup={opened:!1},o.openEnd=function(){o.openEndPopup.opened=!0},o.openEndPopup={opened:!1},o.save=function(){a.createData("https://adcore-test.herokuapp.com/api/create",o.course).then(function(e,t){return t?t:void o.ok(e)})},o.update=function(){a.updateData("https://adcore-test.herokuapp.com/api/update",c).then(function(e,t){return t?t:void o.ok(e)})},o.ok=function(t){e.close(t)},o.cancel=function(){c={},o.butDisable=!1,o.inputsDisable=!1,e.dismiss("cancel")}}]},function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}();t.CRUD=function(){function e(t,o){"ngInject";n(this,e),this.$log=t,this.$http=o}return e.$inject=["$log","$http"],o(e,[{key:"createData",value:function(e,t){var n=this;return this.$http.post(e,t).then(function(e){return e})["catch"](function(e){n.$log.error("XHR Failed for getContributors.\n"+angular.toJson(e.data,!0))})}},{key:"readData",value:function(e){var t=this;return this.$http.get(e).then(function(e){return e.data})["catch"](function(e){t.$log.error("XHR Failed for getContributors.\n"+angular.toJson(e.data,!0))})}},{key:"updateData",value:function(e,t){var n=this;return this.$http.post(e,t).then(function(e){return e.data})["catch"](function(e){n.$log.error("XHR Failed for getContributors.\n"+angular.toJson(e.data,!0))})}},{key:"deleteData",value:function(e,t){var n=this;return this.$http["delete"](e,t).then(function(e){return e.data})["catch"](function(e){n.$log.error("XHR Failed for getContributors.\n"+angular.toJson(e.data,!0))})}}]),e}()},function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}();t.FormatRow=function(){function e(t,o){"ngInject";n(this,e),this.moment=t,this.currencyFormatService=o}return e.$inject=["moment","currencyFormatService"],o(e,[{key:"getLocation",value:function(e){return e[0]+", "+e[1]+", "+e[2]}},{key:"getDate",value:function(e){return this.moment(e).format("DD/MM/YYYY")}},{key:"getLength",value:function(e,t){var n=this.moment(new Date(e)),o=this.moment(new Date(t));return Math.round(this.moment.duration(o.diff(n)).asDays())+" days"}},{key:"getPrice",value:function(e,t){return null!=this.currencyFormatService.getByCode(t)&&null!=this.currencyFormatService.getByCode(t).symbol?this.currencyFormatService.getByCode(t).symbol.grapheme+" "+e:e}}]),e}()},function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(){"ngInject";var e={restrict:"E",templateUrl:"app/components/navbar/navbar.html",scope:{creationDate:"="},controller:r,controllerAs:"vm",bindToController:!0};return e}Object.defineProperty(t,"__esModule",{value:!0}),t.NavbarDirective=o;var r=function a(e){"ngInject";n(this,a),this.relativeDate=e(this.creationDate).fromNow()};r.$inject=["moment"]}]),angular.module("adcore").run(["$templateCache",function(e){e.put("app/main/main.html","<div class=container></div>"),e.put("app/table/table.html",'<div class="container table"><div class="header clearfix"><div class="addNew col-sm-2"><button type=button class="btn btn-primary" ng-click=createRow()>Add new course</button></div><div class="search col-sm-10"><input type=text ng-model=filterValue class=form-control ng-change=filter() placeholder="Search for..."></div></div><div ui-grid=gridOptions class=grid ui-grid-pagination></div><ul uib-pagination boundary-links=true total-items=gridOptions.totalItems ng-model=gridOptions.paginationCurrentPage items-per-page=gridOptions.paginationPageSize max-size=20 rotate=true force-ellipses=true previous-text=&lsaquo; next-text=&rsaquo; first-text=&laquo; last-text=&raquo;></ul></div><script type=text/ng-template id=myModalContent.html><form class="form" name="form" novalidate>\n    <h1 class="titleForm">{{modalTitle}}</h1>\n    <div class="form-horizontal">\n      <div class="form-group">\n        <label class="control-label col-sm-2" for="CourseName">Course Name</label>\n        <div class="col-sm-10 typeahead-demo">\n          <input type="text" id="CourseName" ng-model="course.CourseName" class="form-control" placeholder="Enter course name" required ng-disabled="inputsDisable">\n        </div>\n      </div>\n      <div class="form-group">\n        <label class="control-label col-sm-2" for="Country">Country</label>\n        <div class="col-sm-10 typeahead-demo">\n          <input type="text" id="Country" ng-model="course.Country" uib-typeahead="country for country in countries | filter:$viewValue | limitTo:8" class="form-control" placeholder="Choose country name" required ng-disabled="inputsDisable">\n        </div>\n      </div>\n      <div class="form-group">\n        <label class="control-label col-sm-2" for="City">City</label>\n        <div class="col-sm-10 typeahead-demo">\n          <input type="text" id="City" ng-model="course.City" uib-typeahead="city for city in cities | filter:$viewValue | limitTo:8" class="form-control" placeholder="Choose city name" required ng-disabled="inputsDisable">\n        </div>\n      </div>\n      <div class="form-group">\n        <label class="control-label col-sm-2" for="University">University</label>\n        <div class="col-sm-10 typeahead-demo">\n          <input type="text" id="University" ng-model="course.University" uib-typeahead="university for university in universities | filter:$viewValue | limitTo:8" class="form-control" placeholder="Choose university name" required ng-disabled="inputsDisable">\n        </div>\n      </div>\n      <div class="form-group">\n        <label class="control-label col-sm-2" for="Currency">Price</label>\n        <div class="col-sm-10 typeahead-demo price">\n          <div class="col-sm-3">\n            <input type="text" id="Currency" ng-model="course.Currency" uib-typeahead="currency for currency in currencies | filter:$viewValue | limitTo:8" class="form-control" placeholder="Choose currency" required>\n          </div>\n          <div class="col-sm-3">\n            <input type="number" id="Price" ng-model="course.Price" class="form-control" placeholder="Enter price" min="0" required>\n          </div>\n        </div>\n      </div>\n\n      <div class="form-group">\n        <label class="control-label col-sm-2" for="StartDate">Start Date</label>\n        <div class="col-sm-10 date">\n          <input type="text" id="StartDate" class="form-control" uib-datepicker-popup="{{format}}" ng-model="course.StartDate" is-open="openStartPopup.opened" datepicker-options="dateOptions" ng-required="true" close-text="Close" alt-input-formats="altInputFormats" required/>\n          <span class="input-group-btn">\n            <button type="button" class="btn btn-default" ng-click="openStart()"><i class="glyphicon glyphicon-calendar"></i></button>\n          </span>\n        </div>\n      </div>\n\n      <div class="form-group">\n        <label class="control-label col-sm-2" for="EndDate">End Date</label>\n        <div class="col-sm-10 date">\n          <input type="text" id="EndDate" class="form-control" uib-datepicker-popup="{{format}}" ng-model="course.EndDate" is-open="openEndPopup.opened" datepicker-options="dateOptions" ng-required="true" close-text="Close" alt-input-formats="altInputFormats" required/>\n          <span class="input-group-btn">\n            <button type="button" class="btn btn-default" ng-click="openEnd()"><i class="glyphicon glyphicon-calendar"></i></button>\n          </span>\n        </div>\n      </div>\n\n      <div class="form-group">\n        <label class="control-label col-sm-2" for="CourseDescription">Course Description:</label>\n        <div class="col-sm-10">\n          <textarea class="form-control" name="desc" ng-model="course.CourseDescription" id="CourseDescription" placeholder="Enter course description" resize="no" required></textarea>\n        </div>\n      </div>\n    </div>\n    <div class="modal-footer">\n      <button class="btn btn-primary" ng-if="!butDisable" type="submit" ng-click="save()" ng-disabled="form.$error.required">OK</button>\n      <button class="btn btn-primary" ng-if="butDisable" type="submit" ng-click="update()" ng-disabled="form.$error.required">Update</button>\n      <button class="btn btn-warning" type="button" ng-click="cancel()">Cancel</button>\n    </div>\n  </form></script>'),e.put("app/components/navbar/navbar.html",'<nav class="navbar navbar-static-top navbar-inverse"><div class=container-fluid><div class=navbar-header><a class=navbar-brand href=#><span class="glyphicon glyphicon-home"></span> Nos</a></div><div class="collapse navbar-collapse" id=bs-example-navbar-collapse-6><ul class="nav navbar-nav"><li class=active><a ng-href=/table>Table</a></li></ul></div></div></nav>')}]);
//# sourceMappingURL=../maps/scripts/app-8781ddc37a.js.map
